<h1><%= project.name %></h1>

<a href="/"><< back</a><br /><br />
<h2 class="<%= project.build_status %>"><%= project.build_status %></h2>

<%
  builds = project.builds
  current = builds.select { |b| b.commit == project.current_build }.first
  latest  = builds.select { |b| b.commit == project.latest_build }.first
%>

<h2>Overview</h2>
<strong class="label">Current</strong> :
<% unless current.nil? %>
  <a class="<%= current.status %>" href="/projects/<%= project.name %>/build/<%= current.commit %>"><%= current.commit %></a>
<% end %>
<br />
<strong class="label">Latest successful</strong> :
<% unless latest.nil? %>
  <a class="<%= latest.status %>" href="/projects/<%= project.name %>/build/<%= latest.commit %>"><%= latest == current ? "current" : latest.commit %></a>
<% end %>
<br />
<br />
<br />

<h2>Build history</h2>
<pre class="history terminal"><% project.log.each do |line| %><% build = nil; if (build = line[:build]) %><a title="<%= build.author %>" href="/projects/<%= project.name %>/build/<%= build.commit %>"><%= ansi_color_codes(line[:line]).chomp %></a> <span class="status">[<span class="<%= build.status %>"><%= build.status %></span>] (<%= build.date %>, <%= build.author.gsub '<', '&lt;' %>)</span>
<% else %><%= ansi_color_codes line[:line] %>
<% end %><% end %></pre>
